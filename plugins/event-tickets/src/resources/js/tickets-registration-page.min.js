"undefined"==typeof tribe&&(tribe={}),void 0===tribe.tickets&&(tribe.tickets={}),tribe.tickets.registration={},function(e,t){"use strict";t.hasChanges=!1,t.selector={container:".tribe-block__tickets__registration__event",fields:".tribe-block__tickets__item__attendee__fields",fieldsError:".tribe-block__tickets__item__attendee__fields__error",form:".tribe-block__tickets__item__attendee__fields__form",toggler:".tribe-block__tickets__registration__toggle__handler",status:".tribe-block__tickets__registration__status",field:{text:".tribe-block__tickets__item__attendee__field__text",checkbox:".tribe-block__tickets__item__attendee__field__checkbox",select:".tribe-block__tickets__item__attendee__field__select",radio:".tribe-block__tickets__item__attendee__field__radio"},checkout:".tribe-block__tickets__registration__checkout"},0!==e(t.selector.container).length&&(e(t.selector.container).on("click",t.selector.toggler,function(i){i.preventDefault();var s=e(this);s.closest(t.selector.container).find(t.selector.fields).toggle(),s.toggleClass("open")}),t.validateEventAttendees=function(i){var s=!0;return i.find(".tribe-tickets-meta-required").each(function(){var i=e(this);0===(i.is(t.selector.field.radio)||i.is(t.selector.field.checkbox)?i.find("input:checked").length?"checked":"":i.is(t.selector.field.select)?i.find("select").val():i.find("input, textarea").val().trim()).length&&(s=!1)}),s},t.handleSaveSubmission=function(i){var s=e(this),n=s.parent(t.selector.fields);if(!t.validateEventAttendees(s))return i.preventDefault(),n.find(t.selector.fieldsError).show(),void e("html, body").animate({scrollTop:n.offset().top},300)},t.handleCheckoutSubmission=function(e){!t.hasChanges||confirm(tribe_l10n_datatables.registration_prompt)||e.preventDefault()},t.setHasChanges=function(){t.hasChanges=!0},t.bindFormFields=function(){[e(t.selector.field.text),e(t.selector.field.checkbox),e(t.selector.field.radio),e(t.selector.field.select)].forEach(function(e){(e.is(t.selector.field.radio)||e.is(t.selector.field.checkbox)?e.find("input"):e.is(t.selector.field.select)?e.find("select"):e.find("input, textarea")).change(t.setHasChanges)})},t.bindCheckout=function(){var i=e(t.selector.checkout);i.length&&i.submit(t.handleCheckoutSubmission)},t.bindEvents=function(){t.bindFormFields(),t.bindCheckout()},t.initPage=function(){e(t.selector.container).each(function(){var i=e(this);t.validateEventAttendees(i)?(i.find(t.selector.status).removeClass("incomplete"),i.find(t.selector.status).find("i").removeClass("dashicons-edit"),i.find(t.selector.status).find("i").addClass("dashicons-yes")):i.find(t.selector.status).addClass("incomplete");var s=i.find(t.selector.form);e(s).on("submit",t.handleSaveSubmission)}),t.bindEvents()},t.init=function(){t.initPage()},t.init())}(jQuery,tribe.tickets.registration);